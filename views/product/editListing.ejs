<!DOCTYPE html>
<html lang="en">
  <%- include('../partials/head') %>
  <body>
    <%- include('../partials/header', { currentPage: 'products' }) %>
    <main>
      <div class="listingContainer">
        <form action="/products/sell/edit/<%= product.id %>" method="POST" enctype="multipart/form-data" class="listingForm">
          <h1>Edit Listing</h1>
          <div class="listingGroup">
            <label for="title">Title</label>
            <input type="text" id="title" name="title" value="<%= product.title %>" required />
          </div>
          <div class="listingGroup">
            <label for="price">Price</label>
            <input type="number" id="price" name="price" value="<%= product.price %>" step="0.01" required />
          </div>
          <div class="listingGroupRow">
            <div class="listingGroup">
              <label for="quantity">Quantity</label>
              <input type="number" id="quantity" name="quantity" value="<%= product.quantity %>" step="1" required />
            </div>
            <div class="listingGroup">
              <label for="category">Category</label>
              <select id="category" name="category" required>
                <option value="" disabled>Select a category</option>
                <option value="Electronics" <%= product.category === 'Electronics' ? 'selected' : '' %>>Electronics</option>
                <option value="Textbooks" <%= product.category === 'Textbooks' ? 'selected' : '' %>>Textbooks</option>
                <option value="Accessories" <%= product.category === 'Accessories' ? 'selected' : '' %>>Accessories</option>
                <option value="Stationery" <%= product.category === 'Stationery' ? 'selected' : '' %>>Stationery</option>
                <option value="Other" <%= product.category === 'Other' ? 'selected' : '' %>>Other</option>
              </select>
            </div>
          </div>
          <div class="listingGroup">
            <label for="description">Description</label>
            <textarea id="description" name="description" required><%= product.description %></textarea>
          </div>
          <div class="listingGroupRow">
            <div class="listingGroup">
              <label for="image" class="btn"><i class="fa-solid fa-upload"></i>Upload File</label>
              <input type="file" id="image" name="image" accept="image/*" />
            </div>
            <div class="listingGroup">
                <img id="imagePreview" src="<%= product.image %>" alt="Image Preview" />
            </div>
          </div>
          <div class="listingGroupRow">
            <button type="submit" class="btn">Save Changes</button>
            <a href="/products/sell" class="btn" style="text-align: center;"><div>Cancel</div></a>
          </div>
        </form>
      </div>
    </main>
    <%- include('../partials/footer') %>
  </body>
  <script src="/scripts/imagePreview.js"></script>
</html>